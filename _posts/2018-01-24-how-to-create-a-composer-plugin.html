---
layout: post
status: publish
published: true
title: How to create a Composer plugin
author:
  display_name: Cristian Radulescu
  login: cristian.radulescu
  email: cristian67@gmail.com
  url: http://cristian-radulescu.ro
author_login: cristian.radulescu
author_email: cristian67@gmail.com
author_url: http://cristian-radulescu.ro
excerpt: After tinkering around with Symfony4 and Flex I was curious about how Composer
  plugins work. So I started to check the Composer's plugin API and the official documentation
  fromÂ https://getcomposer.org/doc/articles/plugins.md. The documentation is great
  and you even have a full example of a plugin but when I wanted to test it... nothing.
  The plugin wasn't loaded and nothing happened.
wordpress_id: 551
wordpress_url: https://cristian-radulescu.ro/?p=551
date: '2018-01-24 15:15:40 +0200'
date_gmt: '2018-01-24 12:15:40 +0200'
categories:
- PHP
- Composer
tags:
- PHP
- composer
comments: []
---
<p><!-- wp:paragraph --></p>
<p>After tinkering around with <em>Symfony4</em> and <em>Flex</em> I was curious about how <em>Composer</em> plugins work. So I started to check the <em>Composer's</em> plugin API and <a href="https://getcomposer.org/doc/articles/plugins.md">the official documentation</a>. The documentation is great and you even have a full example of a plugin but when I wanted to test it... nothing. The plugin wasn't loaded and nothing happened. Why? Because I was testing it wrong. :) So this is more of a tip on how to start with a Composer plugin than a real step by step tutorial on how to create it.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>You can find the <strong>demo code</strong>&nbsp;<a href="https://github.com/cristianradulescu/composer-plugin-demo" target="_blank" rel="noreferrer noopener">here</a> if you want to follow it while reading (ignore the instructions from README for now).</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p><strong>First steps:</strong></p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:list {"ordered":true} --></p>
<ol>
<li>Create the <em>composer.json</em> file in a new folder;</li>
<li>Make sure to set the "type" to "composer-plugin", add "autoload" and "extra" sections;</li>
<li>Create the PHP class defined in the "extra" section.</li>
</ol>
<p><!-- /wp:list --></p>
<p><!-- wp:paragraph --></p>
<p><strong>The wrong way to test the plugin (don't do it like this):</strong></p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>What I did next was to actually run <em>composer&nbsp;</em>in the same project where the plugin was created&nbsp;as described above. But it doesn't work like that because this is a plugin and should be added to a project to extend that project's capabilities.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p><strong>The right way to test the plugin:</strong></p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>So instead of trying to execute the plugin as a full featured project, add it to one of your projects. Create a repository for the plugin on Github or another VCS system, then update the&nbsp;<em>composer.json</em>&nbsp;file from your project and include it there:</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:preformatted --></p>
<pre class="wp-block-preformatted">"require": {
  "cristianradulescu/composer-plugin-demo": "dev-master"
},
"repositories": [
  {
    "type": "git",
    "url": "https://github.com/cristianradulescu/composer-plugin-demo.git"
  }
]</pre>
<p><!-- /wp:preformatted --></p>
<p><!-- wp:paragraph --></p>
<p>Run&nbsp;<em>composer update</em> and make sure the plugin is installed.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>In the demo the event is set to "init" which means that the plugin is executed each time <em>composer</em> runs. If you run&nbsp;<em>composer</em> now you should see the plugin's output in terminal:</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:preformatted --></p>
<pre class="wp-block-preformatted">$ ./composer.phar

========= Demo plugin =========
Congrats, your plugin works! :)
===============================

   ______
  / ____/___  ____ ___  ____  ____  ________  _____
 / /   / __ \/ __ `__ \/ __ \/ __ \/ ___/ _ \/ ___/
/ /___/ /_/ / / / / / / /_/ / /_/ (__  )  __/ /
\____/\____/_/ /_/ /_/ .___/\____/____/\___/_/
                    /_/
Composer version 1.6.2 2018-01-05 15:28:41</pre>
<p><!-- /wp:preformatted --></p>
